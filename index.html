<head>
    <style type="text/css">
        body {
            background-color: black;
            color: white;
            font-family: "Lucida Console";
            text-align: center;
        }
        #content {
            text-align: left;
        }
        div {
            padding: 2px;
        }
    </style>
<body>
    <div style="float:right; border: solid 3px white; text-align: center">
        <table>
            <tr>
                <td>Players</td>
                <td></td>
                <td><input type="radio" name="players" value="2"></td>
                <td><input type="radio" name="players" value="3"></td>
                <td><input type="radio" name="players" value="4"></td>
                <td></td>
            </tr>
            <tr>
                <td>Speed</td>
                <td><input type="radio" name="speed" value="1"></td>
                <td><input type="radio" name="speed" value="2"></td>
                <td><input type="radio" name="speed" value="3"></td>
                <td><input type="radio" name="speed" value="4"></td>
                <td><input type="radio" name="speed" value="5"></td>
                <td><input type="radio" name="speed" value="6"></td>
                <td><input type="radio" name="speed" value="7"></td>
                <td><input type="radio" name="speed" value="8"></td>
            </tr>
            <tr>
                <td>Size</td>
                <td><input type="radio" name="size" value="1"></td>
                <td><input type="radio" name="size" value="2"></td>
                <td><input type="radio" name="size" value="3"></td>
                <td><input type="radio" name="size" value="4"></td>
                <td><input type="radio" name="size" value="5"></td>
                <td><input type="radio" name="size" value="6"></td>
                <td><input type="radio" name="size" value="7"></td>
                <td><input type="radio" name="size" value="8"></td>
            </tr>
            <tr>
                <td>Rotation</td>
                <td><input type="radio" name="rotation" value="1"></td>
                <td><input type="radio" name="rotation" value="2"></td>
                <td><input type="radio" name="rotation" value="3"></td>
                <td><input type="radio" name="rotation" value="4"></td>
                <td><input type="radio" name="rotation" value="5"></td>
                <td><input type="radio" name="rotation" value="6"></td>
                <td><input type="radio" name="rotation" value="7"></td>
                <td><input type="radio" name="rotation" value="8"></td>
            </tr>
        </table>
    </div>
    <div id="content">
        <div style="width: 1000px;">
            <div id="score3" style="float: right;"></div>
            <div id="score1"></div>
        </div>
        <canvas id="main" width=1000 height=700 style="border: solid 1px black;">
        Your browser sucks.
        </canvas>
        <div style="width: 1000px;">
            <div id="score2" style="float: right;"></div>
            <div id="score4"></div>
        </div>
    </div>


</body>

<script type="text/javascript" src="jquery-2.0.2.js"></script>
<script type="text/javascript" src="snake.js"></script>
<script type="text/javascript" src="zatacka.js"></script>

<script type="text/javascript">


var canvas = $('#main').get(0);
var ctx = canvas.getContext("2d");

var clearCanvas = function() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.strokeStyle = "#fff";
    ctx.lineWidth = 10;
    ctx.beginPath();
    ctx.moveTo(0,0);
    ctx.lineTo(0, canvas.height);
    ctx.lineTo(canvas.width, canvas.height);
    ctx.lineTo(canvas.width, 0);
    ctx.closePath();
    ctx.stroke();
}

var players = [];
var snakes;
var snakes_alive = 0;
var snake_died = 0;

window.addEventListener('keyup', function(event){Key.onKeyup(event);}, false);
window.addEventListener('keydown', function(event){Key.onKeydown(event);}, false);

var startAnimation = function(){
    var requestAnimFrame = window.requestAnimationFrame ||
            window.webkitRequestAnimationFrame ||
            window.mozRequestAnimationFrame    ||
            window.oRequestAnimationFrame      ||
            window.msRequestAnimationFrame     ||
            null ;

    if ( requestAnimFrame !== null ) {

        var recursiveAnim = function() {
            mainloop();
            requestAnimFrame( recursiveAnim, canvas );
        };

        // start the mainloop
        requestAnimFrame( recursiveAnim, canvas );
    } else {
        var ONE_FRAME_TIME = 1000.0 / 60.0 ;
        setInterval( mainloop, ONE_FRAME_TIME );
    }
};


var startGame = function(){
    clearCanvas();
    n_players = Config.get('players');
    Config.readConfig();
    if (Config.get('players') !== n_players){
        preparePlayers();
    }
    prepareSnakes();
}

$(document).ready(function() {
    startAnimation();
    Config.updateControls();
    preparePlayers();
});
</script>
